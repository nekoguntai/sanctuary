<mxfile host="app.diagrams.net" agent="5.0" version="24.7.17">
  <diagram name="Authentication" id="auth-flow">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="Authentication Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="550" y="20" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="unauth" value="UNAUTHENTICATED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="200" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="creds" value="CREDENTIALS&#xa;RECEIVED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="200" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="2fa_req" value="2FA REQUIRED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="560" y="120" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="auth" value="AUTHENTICATED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=3;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="800" y="200" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="logout" value="LOGOUT" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1040" y="200" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="t1" value="POST /auth/login" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#666666;" edge="1" parent="1" source="unauth" target="creds">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t2" value="2FA enabled" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#d79b00;" edge="1" parent="1" source="creds" target="2fa_req">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t3" value="2FA disabled" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#82b366;" edge="1" parent="1" source="creds" target="auth">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="390" y="280" />
              <mxPoint x="870" y="280" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="t4" value="POST /auth/2fa/verify" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#82b366;" edge="1" parent="1" source="2fa_req" target="auth">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t5" value="POST /auth/logout" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#b85450;" edge="1" parent="1" source="auth" target="logout">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t6" value="Token expired" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#666666;dashed=1;" edge="1" parent="1" source="logout" target="unauth">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1090" y="350" />
              <mxPoint x="150" y="350" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="t7" value="POST /auth/refresh" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#82b366;curved=1;" edge="1" parent="1" source="auth" target="auth">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="870" y="100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="err1" value="401&#xa;Invalid" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="280" y="80" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="te1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;fontSize=9;strokeColor=#b85450;dashed=1;" edge="1" parent="1" source="creds" target="err1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="legend" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=1;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="400" width="300" height="120" as="geometry" />
        </mxCell>
        <mxCell id="leg_title" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="405" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg1" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="90" y="430" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg1t" value="Initial state" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="115" y="427" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg2" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="90" y="455" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg2t" value="Success state" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="115" y="452" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg3" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="90" y="480" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg3t" value="Intermediate state" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="115" y="477" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg4" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="200" y="430" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg4t" value="Terminal/Error state" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="225" y="427" width="120" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram name="Wallet Sync" id="sync-flow">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title2" value="Wallet Sync State Machine" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="idle" value="IDLE" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=3;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="200" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="queued" value="QUEUED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="200" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="locked" value="ACQUIRING&#xa;LOCK" style="ellipse;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="520" y="200" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="syncing" value="SYNCING" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=3;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="720" y="200" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="success" value="SUCCESS" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="920" y="120" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="failed" value="FAILED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="920" y="280" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s1" value="trigger sync" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#666666;" edge="1" parent="1" source="idle" target="queued">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s2" value="job starts" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#d79b00;" edge="1" parent="1" source="queued" target="locked">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s3" value="lock acquired" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#6c8ebf;" edge="1" parent="1" source="locked" target="syncing">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s4" value="complete" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#82b366;" edge="1" parent="1" source="syncing" target="success">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s5" value="error" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#b85450;" edge="1" parent="1" source="syncing" target="failed">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="s6" value="reset" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#82b366;dashed=1;" edge="1" parent="1" source="success" target="idle">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="970" y="80" />
              <mxPoint x="170" y="80" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="s7" value="retry (max 3)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#b85450;dashed=1;" edge="1" parent="1" source="failed" target="queued">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="970" y="380" />
              <mxPoint x="370" y="380" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="triggers" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="80" y="420" width="280" height="150" as="geometry" />
        </mxCell>
        <mxCell id="trig_title" value="Sync Triggers" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="425" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="trig1" value="1. Manual: POST /sync/wallet/:id" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="90" y="450" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="trig2" value="2. Stale check: checkStaleWalletsJob" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="90" y="475" width="220" height="20" as="geometry" />
        </mxCell>
        <mxCell id="trig3" value="3. Real-time: Electrum address subscription" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="90" y="500" width="250" height="20" as="geometry" />
        </mxCell>
        <mxCell id="trig4" value="4. New block: blockheader subscription" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="90" y="525" width="250" height="20" as="geometry" />
        </mxCell>
        <mxCell id="pipeline" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="400" y="420" width="350" height="200" as="geometry" />
        </mxCell>
        <mxCell id="pipe_title" value="Sync Pipeline Phases" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="410" y="425" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="p1" value="1. RBF Cleanup - mark replaced txs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="410" y="450" width="200" height="18" as="geometry" />
        </mxCell>
        <mxCell id="p2" value="2. Fetch Histories - batch address history" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="410" y="468" width="220" height="18" as="geometry" />
        </mxCell>
        <mxCell id="p3" value="3. Check Existing - filter known txs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="410" y="486" width="200" height="18" as="geometry" />
        </mxCell>
        <mxCell id="p4" value="4. Process Transactions - classify &amp; insert" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="410" y="504" width="220" height="18" as="geometry" />
        </mxCell>
        <mxCell id="p5" value="5. Fetch UTXOs - batch unspent outputs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="410" y="522" width="220" height="18" as="geometry" />
        </mxCell>
        <mxCell id="p6" value="6. Reconcile UTXOs - mark spent" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="410" y="540" width="200" height="18" as="geometry" />
        </mxCell>
        <mxCell id="p7" value="7. Insert UTXOs - add new unspent" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="410" y="558" width="200" height="18" as="geometry" />
        </mxCell>
        <mxCell id="p8" value="8. Update Addresses - mark used" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="410" y="576" width="200" height="18" as="geometry" />
        </mxCell>
        <mxCell id="p9" value="9. Gap Limit - derive new addresses" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="410" y="594" width="200" height="18" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram name="Transaction Draft" id="draft-flow">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title3" value="Transaction Draft State Machine (Multi-sig)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="450" y="20" width="500" height="30" as="geometry" />
        </mxCell>
        <mxCell id="d_unsigned" value="UNSIGNED&#xa;(0 sigs)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=3;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="d_partial" value="PARTIAL&#xa;(1+ sigs, &lt;quorum)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="200" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="d_signed" value="SIGNED&#xa;(quorum reached)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=3;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="620" y="200" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="d_broadcast" value="BROADCAST" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="880" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="d_expired" value="EXPIRED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="380" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="d_deleted" value="DELETED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="620" y="380" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="d1" value="POST /drafts&#xa;(create PSBT)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#666666;" edge="1" parent="1" target="d_unsigned">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="40" y="230" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="d2" value="PATCH /drafts/:id&#xa;(add signature)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#d6b656;" edge="1" parent="1" source="d_unsigned" target="d_partial">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="d3" value="more sigs" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#d6b656;curved=1;" edge="1" parent="1" source="d_partial" target="d_partial">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="430" y="140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="d4" value="quorum&#xa;reached" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#82b366;" edge="1" parent="1" source="d_partial" target="d_signed">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="d5" value="broadcast&#xa;to network" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#82b366;" edge="1" parent="1" source="d_signed" target="d_broadcast">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="d6" value="7 days&#xa;timeout" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#b85450;dashed=1;" edge="1" parent="1" source="d_unsigned" target="d_expired">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="180" y="405" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="d7" value="DELETE" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#b85450;" edge="1" parent="1" source="d_partial" target="d_deleted">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="d8" value="DELETE" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#b85450;" edge="1" parent="1" source="d_signed" target="d_deleted">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram name="Notification Flow" id="notify-flow">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title4" value="Notification Delivery Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="src_tx" value="Transaction&#xa;Detected" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="100" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="src_draft" value="Draft&#xa;Created" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="180" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="src_conf" value="Confirmation&#xa;Milestone" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="260" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="queue" value="Job Queue&#xa;(BullMQ)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=3;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="160" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="job" value="Notification&#xa;Job Handler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="160" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ch_tg" value="Telegram" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="100" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ch_push" value="Push (FCM/APNs)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="160" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ch_ws" value="WebSocket" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="220" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dlq" value="Dead Letter&#xa;Queue" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="320" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="n1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="src_tx" target="queue">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="n2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="src_draft" target="queue">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="n3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="src_conf" target="queue">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="n4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d79b00;" edge="1" parent="1" source="queue" target="job">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="n5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;" edge="1" parent="1" source="job" target="ch_tg">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="n6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;" edge="1" parent="1" source="job" target="ch_push">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="n7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;" edge="1" parent="1" source="job" target="ch_ws">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="n8" value="failed (5x)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#b85450;dashed=1;fontSize=10;fontStyle=1;" edge="1" parent="1" source="job" target="dlq">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram name="Ownership Transfer" id="transfer-flow">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title6" value="Ownership Transfer Flow (3-Step Process)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="420" y="20" width="560" height="30" as="geometry" />
        </mxCell>
        <mxCell id="t_pending" value="PENDING&#xa;ACCEPTANCE" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=3;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="t_accepted" value="ACCEPTED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="t_awaiting" value="AWAITING&#xa;CONFIRMATION" style="ellipse;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="t_completed" value="COMPLETED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=3;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="840" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="t_declined" value="DECLINED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="360" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="t_cancelled" value="CANCELLED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="360" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="t_expired" value="EXPIRED" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="360" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="tr1" value="POST /transfers&#xa;(owner initiates)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#666666;" edge="1" parent="1" target="t_pending">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="40" y="230" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tr2" value="recipient accepts" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#d6b656;" edge="1" parent="1" source="t_pending" target="t_accepted">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tr3" value="(auto)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#d79b00;" edge="1" parent="1" source="t_accepted" target="t_awaiting">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tr4" value="owner confirms" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#82b366;" edge="1" parent="1" source="t_awaiting" target="t_completed">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tr5" value="recipient declines" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#b85450;" edge="1" parent="1" source="t_pending" target="t_declined">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tr6" value="owner cancels" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#b85450;" edge="1" parent="1" source="t_awaiting" target="t_cancelled">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tr7" value="30 days" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=9;fontStyle=1;strokeColor=#b85450;dashed=1;" edge="1" parent="1" source="t_pending" target="t_expired">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="step1" value="Step 1" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="150" y="170" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step2" value="Step 2" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="390" y="170" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="step3" value="Step 3" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="630" y="170" width="50" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram name="WebSocket Events" id="websocket-flow">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title5" value="WebSocket Event Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="client" value="Client&#xa;(Browser)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=3;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="180" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wss" value="WebSocket&#xa;Server" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=3;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="redis" value="Redis&#xa;Pub/Sub" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;strokeWidth=2;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="560" y="180" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="worker" value="Worker&#xa;Process" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;strokeWidth=2;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="800" y="180" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="w1" value="ws://connect" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#6c8ebf;" edge="1" parent="1" source="client" target="wss">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w2" value="subscribe" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#9673a6;" edge="1" parent="1" source="wss" target="redis">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w3" value="publish" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontSize=10;fontStyle=1;strokeColor=#d79b00;" edge="1" parent="1" source="worker" target="redis">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="events" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="80" y="320" width="320" height="200" as="geometry" />
        </mxCell>
        <mxCell id="ev_title" value="Client → Server Messages" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="325" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ev1" value="subscribe_wallet { walletId }" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="90" y="350" width="280" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ev2" value="unsubscribe_wallet { walletId }" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="90" y="370" width="280" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ev3" value="subscribe_global" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="90" y="390" width="280" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ev4" value="trigger_sync { walletId }" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="90" y="410" width="280" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ev5" value="ping" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="90" y="430" width="280" height="18" as="geometry" />
        </mxCell>
        <mxCell id="broadcasts" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="440" y="320" width="320" height="200" as="geometry" />
        </mxCell>
        <mxCell id="bc_title" value="Server → Client Events" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="325" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="bc1" value="wallet_updated { walletId, balance }" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="450" y="350" width="280" height="18" as="geometry" />
        </mxCell>
        <mxCell id="bc2" value="transaction_detected { txid, type }" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="450" y="370" width="280" height="18" as="geometry" />
        </mxCell>
        <mxCell id="bc3" value="sync_started { walletId }" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="450" y="390" width="280" height="18" as="geometry" />
        </mxCell>
        <mxCell id="bc4" value="sync_completed { walletId }" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="450" y="410" width="280" height="18" as="geometry" />
        </mxCell>
        <mxCell id="bc5" value="block_height { height }" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="450" y="430" width="280" height="18" as="geometry" />
        </mxCell>
        <mxCell id="bc6" value="draft_signed { draftId, signatureCount }" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="450" y="450" width="300" height="18" as="geometry" />
        </mxCell>
        <mxCell id="bc7" value="pong" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New;" vertex="1" parent="1">
          <mxGeometry x="450" y="470" width="280" height="18" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
