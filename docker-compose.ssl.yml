# =============================================
# Sanctuary Bitcoin Wallet - HTTPS Only
# =============================================
# Usage:
#   HTTPS_PORT=8443 JWT_SECRET=your-secret docker compose -f docker-compose.yml -f docker-compose.ssl.yml up --build
#
# Prerequisites:
#   1. Generate certificates:
#      cd docker/nginx/ssl && chmod +x generate-certs.sh && ./generate-certs.sh localhost
#   2. Or use mkcert for locally-trusted certificates:
#      mkcert -install
#      mkcert -key-file docker/nginx/ssl/privkey.pem -cert-file docker/nginx/ssl/fullchain.pem localhost 127.0.0.1
#
# Environment variables:
#   HTTPS_PORT - HTTPS port (default: 8443)
#   HTTP_PORT - HTTP port for redirect (default: 8080)
# =============================================

services:
  frontend:
    environment:
      ENABLE_SSL: "true"
      HTTPS_REDIRECT_PORT: "${HTTPS_PORT:-8443}"
    ports:
      - "${HTTPS_PORT:-8443}:443"
      - "${HTTP_PORT:-8080}:80"
    volumes:
      - ./docker/nginx/ssl:/etc/nginx/ssl:ro
